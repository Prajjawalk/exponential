#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Run tests with Bun
echo "Running tests..."
if ! bun test; then
  echo "❌ Tests failed. Please fix the failing tests before committing."
  exit 1
fi

# Check for hardcoded colors
echo "Checking for hardcoded colors..."
if git diff --staged --name-only | grep -E '\.(tsx?|jsx?|css)$' | xargs grep -l -E '#[0-9A-Fa-f]{3,8}' 2>/dev/null; then
  echo "❌ Error: Hardcoded hex colors found in staged files!"
  echo "Please use CSS variables or Tailwind classes instead."
  echo "See docs/styling-architecture.md for proper color usage."
  exit 1
fi

echo "✅ No hardcoded colors found"
